<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>8.&nbsp;Data networks</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Beatrice of Hull"><link rel="up" href="ch04.html" title="Chapter&nbsp;4.&nbsp;Installations"><link rel="prev" href="ch04s07.html" title="7.&nbsp;Bilge pumping system"><link rel="next" href="ch04s09.html" title="9.&nbsp;Electrical system"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.&nbsp;Data networks</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s07.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;4.&nbsp;Installations</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04s09.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2335"></a>8.&nbsp;Data networks</h2></div></div></div><p>NMEA 2000 and Ethernet data networks are installed on the ship together with some small-scale proprietary networks concerned with operation of the Victron power system.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2340"></a>8.1.&nbsp;NMEA 2000</h3></div></div></div><p>The vessel is equipped with two NMEA 2000 buses, bridged at the helm but powered separately via switches on the domestic panel.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">NMEA BUS 0 ('domestic bus')</span></dt><dd><p>NMEA bus 0 supports all on-board control functions and instrumentation of the ship's domestic or 'house' systems.</p><p>If this bus is not permanently enabled then very few of the ship's systems can be monitored or operated.</p></dd><dt><span class="term">NMEA BUS 1 ('navigation bus')</span></dt><dd><p>NMEA bus 1 supports instrumentation and controls related to navigation of the vessel.</p><p>This bus must be enabled when navigating the vessel, but should be powered down when the ship is moored.</p></dd></dl></div><p>The following schematic indicates the general arrangement of the NMEA 2000 network.</p><p></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2365"></a>8.1.1.&nbsp;Equipment</h4></div></div></div><p>The following table lists NMEA 2000 infrastructure components.</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col width="20%"><col width="20%"><col width="20%"><col width="20%"><col width="20%"></colgroup><thead><tr><th align="center">Device</th><th>Serial #</th><th>Instance</th><th>Bus</th><th align="center">Location</th></tr></thead><tbody><tr><td>Actisense NGT-1-ISO NMEA 2000 gateway</td><td>&nbsp;</td><td>n/a</td><td>0</td><td>Helm</td></tr><tr><td>Actisense QNB1 network block</td><td>&nbsp;</td><td>n/a</td><td>1</td><td>Helm panel</td></tr><tr><td>Oceanic Systems 3478 relay output module</td><td>&nbsp;</td><td>0x0A</td><td>0</td><td>Engine room</td></tr><tr><td>Oceanic Systems 3478 relay output module</td><td>&nbsp;</td><td>0x1A</td><td>1</td><td>Engine room</td></tr><tr><td>Oceanic Systems 3478 relay output module</td><td>&nbsp;</td><td>0x0F</td><td>0</td><td>Master cabin</td></tr><tr><td>Oceanic Systems 3478 relay output module</td><td>&nbsp;</td><td>0x1F</td><td>1</td><td>Master cabin</td></tr><tr><td>Oceanic Systems 4410 switch input module</td><td>&nbsp;</td><td>0x01</td><td>0</td><td>Helm</td></tr><tr><td>Oceanic Systems 4410 switch input module</td><td>&nbsp;</td><td>0x11</td><td>0</td><td>Helm</td></tr><tr><td>Maretron NBE100 network bus extender</td><td>&nbsp;</td><td>n/a</td><td>0 &amp; 1</td><td>Helm</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2475"></a>8.2.&nbsp;Ethernet LAN</h3></div></div></div><p>Ethernet LANs support a range of ship services, providing client access for information displays, virtual control panels, VoIP deck communication, map and NIS services and audio and video entertainment. The general arrangement of LAN components is illustrated in the following schematic.</p><div class="figure"><a name="d0e2481"></a><p class="title"><b>Figure&nbsp;4.12.&nbsp;Schematic of Beatrice's Ethernet LAN</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="resources/ethernet_lan.png" align="middle" width="531" alt="Schematic of Beatrice's Ethernet LAN"></div></div></div><p><br class="figure-break"></p><p>A power over Ethernet <span class="bold"><strong>Switch</strong></span> establishes a wired Ethernet LAN that connects important servers, desktops and installed equipment like IP cameras. Devices in this network are assigned static IP addresses in the 192.168.1.0/24 sub-net.</p><p>This basic LAN is sufficient to provide a platform for operating the ship, but normally it will be extended by one or more wireless mesh networks created by <span class="bold"><strong>Helm Router</strong></span> and <span class="bold"><strong>Saloon Access Point</strong></span>. A wireless network with SSID &#8220;beatrice&#8221; uses the same 192.168.1.0/24 sub-net as the wired LAN and clients have unrestricted access to all on-board services. A second wireless network &#8220;beatrice-guest&#8221; uses a different sub-net with restricted bandwidth and limited access to devices on the primary LAN. Client devices on the mesh networks are assigned IP addresses by <span class="bold"><strong>Helm Router</strong></span>&#8216;s DHCP service with some clients (for example the ship&#8217;s audio visual devices) receiving fixed addresses.</p><p><span class="bold"><strong>Helm Router</strong></span>&#8216;s WAN interface can be connected through <span class="bold"><strong>A/B Switch</strong></span> to either <span class="bold"><strong>WiFi Router</strong></span> or <span class="bold"><strong>4G Router</strong></span> facilitating access to the Internet for the whole network. Internet access via <span class="bold"><strong>WiFi Router</strong></span> is only feasible when the vessel has access to a suitable shore-based WiFi access point; when the vessel is cruising the only viable means of Internet access will be via <span class="bold"><strong>4G Router</strong></span> which, in an case, seeks to maintain a permanent cellular data connection.</p><p>Typically, all the various network routers, switches and access points should be powered whenever the vessel is in commission.</p><p>User operation of the LAN reduces to selecting the WAN connection type (<span class="bold"><strong>A/B Switch</strong></span> can be remotely operated by the helm panel [WiFi] switch) and visiting <span class="bold"><strong>WiFi Router</strong></span>&#8216;s configuration interface in order to establish a connection to a harbour access point. The mesh network is implemented on Google WiFi hardware and can be monitored and configured using the &#8220;Google Home&#8221; App.</p><p>See this table for an inventory of (and more detailed information on) LAN devices which have static and fixed IP addresses.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2534"></a>8.3.&nbsp;Ethernet LAN</h3></div></div></div><div class="figure"><a name="d0e2538"></a><p class="title"><b>Figure&nbsp;4.13.&nbsp;Ethernet LAN infrastructure components</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="resources/ethernet.png" align="middle" width="602" alt="Ethernet LAN infrastructure components"></div></div></div><p><br class="figure-break">Ethernet is used to support general access to ship services including information displays, virtual control panels, VoIP deck communication, map and NIS services and audio and video entrtainment.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2545"></a>8.3.1.&nbsp;Equipment</h4></div></div></div><p>The following table lists Ethernet infrastructure components.</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th align="center">Item</th><th>Location</th><th>IP addresses (hostname)</th></tr></thead><tbody><tr><td>NetGear N600 wireless router</td><td>Helm</td><td>192.168.1.254 (gateway), 192.168.2.254 (WAN), 192.168.3.254 (USB 4G)</td></tr><tr><td>Ubiquiti Networks Bullet gateway</td><td>On deck below blue-board</td><td>192.168.2.253 (bullet)</td></tr><tr><td>Cisco managed switch</td><td>Lower companionway server rack</td><td>192.168.1.253 (switch)</td></tr><tr><td>Rasperrby Pi VPN router</td><td>Helm</td><td>192.168.1.252</td></tr><tr><td>Signal K / NMEA controller</td><td>Helm</td><td>192.168.1.1 (controller)</td></tr><tr><td>Navigation PC</td><td>Helm</td><td>192.168.1.101 (helm)</td></tr><tr><td>NAS/DLNA server</td><td>Lower companionway server rack</td><td>192.168.1.2 (nas)</td></tr><tr><td>OpenSeaMap server</td><td>Lower companionway server rack</td><td>192.168.1.3 (maps)</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2617"></a>8.3.2.&nbsp;Wired networks</h4></div></div></div><p>CAT6 UTP cabling from around the ship terminates at a network switch located in the ship's data cabinet which is accessible behind a panel on the port side of the lower companionway. The switch WAN port is connected by a single cable to the main router located at the helm. Helm equipment which benefits from an Ethernet connection is cabled directly to the main router's built in LAN switch.</p><p>A second wired network consisting of a single cable connects the main router's WAN port to the ship's external gateway.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2624"></a>8.3.3.&nbsp;Wireless networks</h4></div></div></div><p>The ship implements two WiFi networks: an internal network (SSID="BEATRICE") simply extends the vessels 192.168.1.0 network whilst an external network (SSID="BEATRICE-EXT") supports VoIP intercom use for deck crew and allows restricted access to on-board services for guests.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2629"></a>8.4.&nbsp;WAN</h3></div></div></div><p>Connection to external networks is provided in three ways:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>By WiFi. The ship's wireless gateway operates in station mode to allow connection to an available WiFi hotspot. The administration interface allows identification of and connection to available networks and is accessible at https://192.168.2.254/ with default credentials "ubnt:ubnt". For this service to be available, the <span class="keycap"><strong>WiFi</strong></span> switch at the helm must be on.</p></li><li class="listitem"><p>By 4G. The ship's router is equipped with a 4G USB dongle connected to a remote external antenna. The arrangement give a broadband quality data link to the Internet at a maximum speed of 150Mbs. The administration interface at https://192.168.1.254/ allows management of the connection.</p></li><li class="listitem"><p>By SMS. The USB dongle used for 4G connection also supports sending and receiving SMS messages which are used by some Signal K applications for notification of alerts and for remote control.</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s07.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch04s09.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">7.&nbsp;Bilge pumping system&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;9.&nbsp;Electrical system</td></tr></table></div></body></html>